<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç–∏ (–¢–æ—á–µ–Ω–∏–µ) | CNC –ü–æ—Ä—Ç–∞–ª</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            max-width: 700px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        .calculator {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e1e5eb;
        }
        h1 {
            color: #2c3e50;
            margin-top: 0;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            font-size: 1.8em;
        }
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        input[type="number"],
        select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #3498db;
        }
        .btn {
            display: inline-block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        .btn:hover {
            background: linear-gradient(to right, #2980b9, #2573a7);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(41, 128, 185, 0.3);
        }
        .btn:active {
            transform: translateY(0);
        }
        .result {
            margin-top: 30px;
            padding: 20px;
            background-color: #e8f4fc;
            border-radius: 8px;
            border-left: 5px solid #3498db;
            font-size: 1.1em;
            display: none; /* –°–Ω–∞—á–∞–ª–∞ —Å–∫—Ä—ã—Ç */
        }
        .result h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        .highlight {
            font-size: 1.4em;
            font-weight: bold;
            color: #e74c3c;
            padding: 5px 10px;
            background-color: white;
            border-radius: 5px;
            display: inline-block;
            margin: 5px 0;
        }
        .formula {
            font-family: 'Courier New', monospace;
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border: 1px dashed #95a5a6;
            margin: 15px 0;
            text-align: center;
            font-size: 1.1em;
        }
        .info-box {
            background-color: #fffde7;
            border-left: 5px solid #f1c40f;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 8px 8px 0;
            font-size: 0.95em;
        }
        .mode-switch {
            display: flex;
            margin-bottom: 20px;
            border: 2px solid #3498db;
            border-radius: 8px;
            overflow: hidden;
        }
        .mode-btn {
            flex: 1;
            padding: 12px;
            text-align: center;
            background: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        .mode-btn.active {
            background-color: #3498db;
            color: white;
        }
        .input-section {
            display: block;
        }
        footer {
            text-align: center;
            margin-top: 30px;
            font-size: 0.9em;
            color: #7f8c8d;
        }
        .tooltip {
            color: #7f8c8d;
            font-size: 0.9em;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <h1><span style="color: #3498db;">‚ñ¶</span> –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–π —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç–∏ –ø—Ä–∏ —Ç–æ—á–µ–Ω–∏–∏</h1>
        <p>–†–∞—Å—á—ë—Ç –ø–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π —Ñ–æ—Ä–º—É–ª–µ –¥–ª—è –ø–ª–∞—Å—Ç–∏–Ω —Å —Ä–∞–¥–∏—É—Å–æ–º –ø—Ä–∏ –≤–µ—Ä—à–∏–Ω–µ. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞—Å—á–µ—Ç–∞.</p>

        <div class="mode-switch">
            <button id="modeDirect" class="mode-btn active">–†–µ–∂–∏–º 1: –ü–æ–¥–∞—á–∞ ‚Üí –®–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å</button>
            <button id="modeReverse" class="mode-btn">–†–µ–∂–∏–º 2: –®–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å ‚Üí –ü–æ–¥–∞—á–∞</button>
        </div>

        <!-- –†–ï–ñ–ò–ú 1: –ü—Ä—è–º–æ–π —Ä–∞—Å—á–µ—Ç (–ü–æ–¥–∞—á–∞ -> Ra) -->
        <div id="directInputs" class="input-section">
            <div class="form-group">
                <label for="feedRate">–ü–æ–¥–∞—á–∞ –Ω–∞ –æ–±–æ—Ä–æ—Ç, f (–º–º/–æ–±):</label>
                <input type="number" id="feedRate" step="0.01" min="0.01" max="2" value="0.2">
                <span class="tooltip">–û–±—ã—á–Ω–æ –æ—Ç 0.05 –¥–æ 1.0 –º–º/–æ–± –¥–ª—è —á–∏—Å—Ç–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.</span>
            </div>

            <div class="form-group">
                <label for="insertRadius">–†–∞–¥–∏—É—Å –ø—Ä–∏ –≤–µ—Ä—à–∏–Ω–µ –ø–ª–∞—Å—Ç–∏–Ω—ã, r (–º–º):</label>
                <select id="insertRadius">
                    <option value="0.2">0.2 (—á–∏—Å—Ç–æ–≤–∞—è, –º–µ–ª–∫–∏–µ —Ä–∞–¥–∏—É—Å—ã)</option>
                    <option value="0.4" selected>0.4 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)</option>
                    <option value="0.8">0.8 (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π, –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è –ø—Ä–æ—á–Ω–æ—Å—Ç—å)</option>
                    <option value="1.2">1.2 (—á–µ—Ä–Ω–æ–≤–∞—è/–ø–æ–ª—É—á–∏—Å—Ç–æ–≤–∞—è)</option>
                    <option value="custom">–í–≤–µ—Å—Ç–∏ —Å–≤–æ—ë –∑–Ω–∞—á–µ–Ω–∏–µ...</option>
                </select>
                <div id="customRadiusContainer" style="display:none; margin-top:10px;">
                    <label for="customRadius">–í–∞—à —Ä–∞–¥–∏—É—Å, r (–º–º):</label>
                    <input type="number" id="customRadius" step="0.1" min="0.1" max="3" value="0.8">
                </div>
            </div>

            <button id="btnCalculateDirect" class="btn">üìä –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫—É—é —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å Ra</button>
        </div>

        <!-- –†–ï–ñ–ò–ú 2: –û–±—Ä–∞—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç (Ra -> –ü–æ–¥–∞—á–∞) -->
        <div id="reverseInputs" class="input-section" style="display:none;">
            <div class="form-group">
                <label for="targetRa">–¶–µ–ª–µ–≤–∞—è —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å, Ra (–º–∫–º):</label>
                <input type="number" id="targetRa" step="0.1" min="0.1" max="25" value="3.2">
                <span class="tooltip>–ù–∞–ø—Ä–∏–º–µ—Ä: 1.6 (—á–∏—Å—Ç–æ–≤–∞—è), 3.2 (–ø–æ–ª—É—á–∏—Å—Ç–æ–≤–∞—è), 6.3 (—á–µ—Ä–Ω–æ–≤–∞—è).</span>
            </div>

            <div class="form-group">
                <label for="insertRadiusRev">–†–∞–¥–∏—É—Å –ø—Ä–∏ –≤–µ—Ä—à–∏–Ω–µ –ø–ª–∞—Å—Ç–∏–Ω—ã, r (–º–º):</label>
                <select id="insertRadiusRev">
                    <option value="0.2">0.2 (—á–∏—Å—Ç–æ–≤–∞—è, –º–µ–ª–∫–∏–µ —Ä–∞–¥–∏—É—Å—ã)</option>
                    <option value="0.4" selected>0.4 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)</option>
                    <option value="0.8">0.8 (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π, –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è –ø—Ä–æ—á–Ω–æ—Å—Ç—å)</option>
                    <option value="1.2">1.2 (—á–µ—Ä–Ω–æ–≤–∞—è/–ø–æ–ª—É—á–∏—Å—Ç–æ–≤–∞—è)</option>
                    <option value="customRev">–í–≤–µ—Å—Ç–∏ —Å–≤–æ—ë –∑–Ω–∞—á–µ–Ω–∏–µ...</option>
                </select>
                <div id="customRadiusRevContainer" style="display:none; margin-top:10px;">
                    <label for="customRadiusRev">–í–∞—à —Ä–∞–¥–∏—É—Å, r (–º–º):</label>
                    <input type="number" id="customRadiusRev" step="0.1" min="0.1" max="3" value="0.8">
                </div>
            </div>

            <button id="btnCalculateReverse" class="btn">üîß –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ç—Ä–µ–±—É–µ–º—É—é –ø–æ–¥–∞—á—É f</button>
        </div>

        <!-- –ë–õ–û–ö –§–û–†–ú–£–õ–´ -->
        <div class="formula">
            <strong>–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ–æ—Ä–º—É–ª–∞:</strong><br>
            Ra (–º–∫–º) ‚âà [ f¬≤ (–º–º/–æ–±) ] / [ 8 √ó r (–º–º) ] √ó 1000
        </div>

        <!-- –†–ï–ó–£–õ–¨–¢–ê–¢–´ –†–ê–°–ß–ï–¢–ê -->
        <div id="resultDirect" class="result">
            <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä—è–º–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞:</h3>
            <p>–ü—Ä–∏ –ø–æ–¥–∞—á–µ <strong><span id="resultFeed">0.2</span> –º–º/–æ–±</strong> –∏ —Ä–∞–¥–∏—É—Å–µ –ø–ª–∞—Å—Ç–∏–Ω—ã <strong><span id="resultRadius">0.4</span> –º–º</strong>:</p>
            <p>–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å: <span class="highlight" id="resultRa">6.25 –º–∫–º</span> (Ra)</p>
            <p><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> <span id="recommendation">–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–æ–ª—É—á–∏—Å—Ç–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.</span></p>
        </div>

        <div id="resultReverse" class="result">
            <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞:</h3>
            <p>–î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç–∏ <strong><span id="resultTargetRa">3.2</span> –º–∫–º (Ra)</strong> —Å —Ä–∞–¥–∏—É—Å–æ–º –ø–ª–∞—Å—Ç–∏–Ω—ã <strong><span id="resultRadiusRev">0.4</span> –º–º</strong>:</p>
            <p>–ù–µ–æ–±—Ö–æ–¥–∏–º–∞—è –ø–æ–¥–∞—á–∞: <span class="highlight" id="resultFeedRev">0.10 –º–º/–æ–±</span></p>
            <p><strong>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç:</strong> <span id="recommendationRev">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–ª–∞—Å—Ç–∏–Ω—É —Å —Ä–∞–¥–∏—É—Å–æ–º 0.8 –º–º –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø–æ–¥–∞—á–∏ –¥–æ ~0.14 –º–º/–æ–± –ø—Ä–∏ —Ç–æ–π –∂–µ —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç–∏, —á—Ç–æ –ø–æ–≤—ã—Å–∏—Ç —Å—Ç–æ–π–∫–æ—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.</span></p>
        </div>

        <!-- –ò–ù–§–û–ë–û–ö–° -->
        <div class="info-box">
            <strong>‚ùó –í–∞–∂–Ω–æ!</strong> –≠—Ç–æ <strong>—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è</strong> —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å. –ù–∞ —Ä–µ–∞–ª—å–Ω—É—é –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å —Ç–∞–∫–∂–µ –≤–ª–∏—è—é—Ç:
            <ul>
                <li>–ò–∑–Ω–æ—Å –∏ –≥–µ–æ–º–µ—Ç—Ä–∏—è –ø–ª–∞—Å—Ç–∏–Ω—ã</li>
                <li>–í–∏–±—Ä–∞—Ü–∏–∏ (–±–∏–µ–Ω–∏–µ, –∂—ë—Å—Ç–∫–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã)</li>
                <li>–ú–∞—Ç–µ—Ä–∏–∞–ª –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –∏ —Ä–µ–∂–∏–º—ã —Ä–µ–∑–∞–Ω–∏—è (—Å–∫–æ—Ä–æ—Å—Ç—å, –≥–ª—É–±–∏–Ω–∞)</li>
                <li>–°–û–ñ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–∞–Ω–∫–∞</li>
            </ul>
            –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∫ –æ—Ç–ª–∏—á–Ω—É—é —Å—Ç–∞—Ä—Ç–æ–≤—É—é —Ç–æ—á–∫—É –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
        </div>
    </div>

    <footer>
        <p>CNC –ü–æ—Ä—Ç–∞–ª ¬© 2023. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –º–µ—Ç–∞–ª–ª–æ–≤ —Ä–µ–∑–∞–Ω–∏–µ–º.</p>
    </footer>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const modeDirectBtn = document.getElementById('modeDirect');
        const modeReverseBtn = document.getElementById('modeReverse');
        const directInputs = document.getElementById('directInputs');
        const reverseInputs = document.getElementById('reverseInputs');
        const resultDirect = document.getElementById('resultDirect');
        const resultReverse = document.getElementById('resultReverse');
        const insertRadiusSelect = document.getElementById('insertRadius');
        const customRadiusContainer = document.getElementById('customRadiusContainer');
        const customRadiusInput = document.getElementById('customRadius');
        const insertRadiusRevSelect = document.getElementById('insertRadiusRev');
        const customRadiusRevContainer = document.getElementById('customRadiusRevContainer');
        const customRadiusRevInput = document.getElementById('customRadiusRev');

        // –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –†–ï–ñ–ò–ú–û–í
        modeDirectBtn.addEventListener('click', () => switchMode('direct'));
        modeReverseBtn.addEventListener('click', () => switchMode('reverse'));

        function switchMode(mode) {
            if (mode === 'direct') {
                modeDirectBtn.classList.add('active');
                modeReverseBtn.classList.remove('active');
                directInputs.style.display = 'block';
                reverseInputs.style.display = 'none';
                resultDirect.style.display = 'none';
                resultReverse.style.display = 'none';
            } else {
                modeDirectBtn.classList.remove('active');
                modeReverseBtn.classList.add('active');
                directInputs.style.display = 'none';
                reverseInputs.style.display = 'block';
                resultDirect.style.display = 'none';
                resultReverse.style.display = 'none';
            }
        }

        // –û–ë–†–ê–ë–û–¢–ö–ê –í–´–ë–û–†–ê –†–ê–î–ò–£–°–ê (–ü—Ä—è–º–æ–π —Ä–µ–∂–∏–º)
        insertRadiusSelect.addEventListener('change', function() {
            customRadiusContainer.style.display = this.value === 'custom' ? 'block' : 'none';
        });

        // –û–ë–†–ê–ë–û–¢–ö–ê –í–´–ë–û–†–ê –†–ê–î–ò–£–°–ê (–û–±—Ä–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º)
        insertRadiusRevSelect.addEventListener('change', function() {
            customRadiusRevContainer.style.display = this.value === 'customRev' ? 'block' : 'none';
        });

        // –§–£–ù–ö–¶–ò–Ø –†–ê–°–ß–ï–¢–ê: –ü–æ–¥–∞—á–∞ -> Ra
        function calculateRa() {
            // 1. –ü–æ–ª—É—á–∞–µ–º –ø–æ–¥–∞—á—É
            const feed = parseFloat(document.getElementById('feedRate').value);
            if (isNaN(feed) || feed <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–¥–∞—á–∏ (–±–æ–ª—å—à–µ 0).');
                return;
            }

            // 2. –ü–æ–ª—É—á–∞–µ–º —Ä–∞–¥–∏—É—Å
            let radius;
            if (insertRadiusSelect.value === 'custom') {
                radius = parseFloat(customRadiusInput.value);
            } else {
                radius = parseFloat(insertRadiusSelect.value);
            }
            if (isNaN(radius) || radius <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–¥–∏—É—Å–∞ (–±–æ–ª—å—à–µ 0).');
                return;
            }

            // 3. –û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞: Ra (–º–∫–º) = (f^2 / (8 * r)) * 1000
            const ra = (Math.pow(feed, 2) / (8 * radius)) * 1000;

            // 4. –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            document.getElementById('resultFeed').textContent = feed.toFixed(2);
            document.getElementById('resultRadius').textContent = radius.toFixed(1);
            document.getElementById('resultRa').textContent = ra.toFixed(2) + ' –º–∫–º';

            // 5. –î–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é
            let recommendation = '';
            if (ra <= 1.6) recommendation = '–û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è —á–∏—Å—Ç–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, –∑–µ—Ä–∫–∞–ª—å–Ω—ã—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π.';
            else if (ra <= 3.2) recommendation = '–•–æ—Ä–æ—à–∞—è –ø–æ–ª—É—á–∏—Å—Ç–æ–≤–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–æ—Å–∞–¥–æ—á–Ω—ã—Ö –º–µ—Å—Ç.';
            else if (ra <= 6.3) recommendation = '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —á–µ—Ä–Ω–æ–≤–∞—è/–ø–æ–ª—É—á–∏—Å—Ç–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞. –í–æ–∑–º–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è —á–∏—Å—Ç—ã–π –ø—Ä–æ—Ö–æ–¥.';
            else recommendation = '–ß–µ—Ä–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–ª–∏ –æ–±–¥–∏—Ä–∫–∞. –î–ª—è —Ñ–∏–Ω–∏—à–∞ —É–º–µ–Ω—å—à–∏—Ç–µ –ø–æ–¥–∞—á—É –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–¥–∏—É—Å –ø–ª–∞—Å—Ç–∏–Ω—ã.';

            document.getElementById('recommendation').textContent = recommendation;

            // 6. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            resultDirect.style.display = 'block';
            resultReverse.style.display = 'none';
        }

        // –§–£–ù–ö–¶–ò–Ø –†–ê–°–ß–ï–¢–ê: Ra -> –ü–æ–¥–∞—á–∞
        function calculateFeed() {
            // 1. –ü–æ–ª—É—á–∞–µ–º —Ü–µ–ª–µ–≤—É—é —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å
            const targetRa = parseFloat(document.getElementById('targetRa').value);
            if (isNaN(targetRa) || targetRa <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç–∏ Ra (–±–æ–ª—å—à–µ 0).');
                return;
            }

            // 2. –ü–æ–ª—É—á–∞–µ–º —Ä–∞–¥–∏—É—Å
            let radius;
            if (insertRadiusRevSelect.value === 'customRev') {
                radius = parseFloat(customRadiusRevInput.value);
            } else {
                radius = parseFloat(insertRadiusRevSelect.value);
            }
            if (isNaN(radius) || radius <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–¥–∏—É—Å–∞ (–±–æ–ª—å—à–µ 0).');
                return;
            }

            // 3. –û–±—Ä–∞—Ç–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞: f (–º–º/–æ–±) = sqrt( (Ra * 8 * r) / 1000 )
            const feed = Math.sqrt((targetRa * 8 * radius) / 1000);

            // 4. –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            document.getElementById('resultTargetRa').textContent = targetRa.toFixed(2);
            document.getElementById('resultRadiusRev').textContent = radius.toFixed(1);
            document.getElementById('resultFeedRev').textContent = feed.toFixed(3) + ' –º–º/–æ–±';

            // 5. –î–∞–µ–º –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç
            let advice = '';
            if (feed < 0.05) {
                advice = '–ü–æ–¥–∞—á–∞ –æ—á–µ–Ω—å –º–∞–ª–∞. –†–∏—Å–∫ –Ω–∞—Ä–æ—Å—Ç–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏ –Ω–∏–∑–∫–æ–π —Å—Ç–æ–π–∫–æ—Å—Ç–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–ª–∞—Å—Ç–∏–Ω—É —Å —Ä–∞–¥–∏—É—Å–æ–º 0.2 –º–º –∏–ª–∏ —á–∏—Å—Ç–æ–≤—É—é –ø–ª–∞—Å—Ç–∏–Ω—É —Å wiper-–≥–µ–æ–º–µ—Ç—Ä–∏–µ–π.';
            } else if (feed < 0.15) {
                advice = '–¢–∏–ø–∏—á–Ω–∞—è –ø–æ–¥–∞—á–∞ –¥–ª—è —á–∏—Å—Ç–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤–∏–±—Ä–∞—Ü–∏–π.';
            } else {
                advice = '–•–æ—Ä–æ—à–∞—è –ø–æ–¥–∞—á–∞ –¥–ª—è –ø–æ–ª—É—á–∏—Å—Ç–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏. –ü–ª–∞—Å—Ç–∏–Ω–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ.';
            }
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–≤–µ—Ç –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –¥—Ä—É–≥–∏–º —Ä–∞–¥–∏—É—Å–æ–º
            const altRadius = (radius === 0.4) ? 0.8 : 0.4;
            const altFeed = Math.sqrt((targetRa * 8 * altRadius) / 1000);
            advice += ` –î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è: –ø—Ä–∏ —Ä–∞–¥–∏—É—Å–µ ${altRadius} –º–º –ø–æ–¥–∞—á–∞ –±—ã–ª–∞ –±—ã ~${altFeed.toFixed(3)} –º–º/–æ–±.`;

            document.getElementById('recommendationRev').textContent = advice;

            // 6. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            resultDirect.style.display = 'none';
            resultReverse.style.display = 'block';
        }

        // –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í –ö–ù–û–ü–û–ö
        document.getElementById('btnCalculateDirect').addEventListener('click', calculateRa);
        document.getElementById('btnCalculateReverse').addEventListener('click', calculateFeed);

        // –†–ê–°–ß–ï–¢ –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï –°–¢–†–ê–ù–ò–¶–´ (–ø—Ä—è–º–æ–π —Ä–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
        window.addEventListener('DOMContentLoaded', () => {
            calculateRa(); // –ß—Ç–æ–±—ã —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞
        });
    </script>
</body>
</html>